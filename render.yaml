# ============================================================
# OrcaMet Portal — Render Blueprint
# ============================================================
# This file defines the infrastructure for one-click deployment.
# Push to GitHub, then connect via Render Dashboard > Blueprints.
# ============================================================

databases:
  - name: orcamet-db
    plan: free
    databaseName: orcamet_portal
    user: orcamet

services:
  - type: web
    plan: free
    name: orcamet-portal
    runtime: python
    buildCommand: "bash build.sh"
    startCommand: "gunicorn orcamet_portal.wsgi:application"
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: orcamet-db
          property: connectionString
      - key: SECRET_KEY
        generateValue: true
      - key: WEB_CONCURRENCY
        value: 4
      - key: PYTHON_VERSION
        value: "3.12.3"
      # Auth0 — set these manually in the Render dashboard
      # after creating your Auth0 application
      # - key: AUTH0_DOMAIN
      #   value: your-tenant.uk.auth0.com
      # - key: AUTH0_CLIENT_ID
      #   value: your-client-id
      # - key: AUTH0_CLIENT_SECRET
      #   value: your-client-secret
      # - key: OPENMETEO_API_KEY
      #   value: your-api-key
